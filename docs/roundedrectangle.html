<!DOCTYPE html>  <html> <head>   <title>roundedrectangle.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="bitmap.html">                 bitmap.coffee               </a>                                           <a class="source" href="circle.html">                 circle.coffee               </a>                                           <a class="source" href="curve.html">                 curve.coffee               </a>                                           <a class="source" href="line.html">                 line.coffee               </a>                                           <a class="source" href="polygon.html">                 polygon.coffee               </a>                                           <a class="source" href="rectangle.html">                 rectangle.coffee               </a>                                           <a class="source" href="roundedrectangle.html">                 roundedrectangle.coffee               </a>                                           <a class="source" href="square.html">                 square.coffee               </a>                                           <a class="source" href="star.html">                 star.coffee               </a>                                           <a class="source" href="text.html">                 text.coffee               </a>                                           <a class="source" href="triangle.html">                 triangle.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               roundedrectangle.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>Rounded Rectangle is one of my primitives.
It is drawn using the moveTo, lineTo, and arcTo functions in the HTML5 library.
It takes in the special arguments width, height, and arcRadius.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">RoundedRectangle</span> <span class="k">extends</span> <span class="nx">Shape</span>
  <span class="nx">constructor</span><span class="o">:</span><span class="nf">(args = {})-&gt;</span> 
    <span class="k">super</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span><span class="nx">args</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span><span class="nx">args</span><span class="p">.</span><span class="nx">rotationVelocity</span><span class="p">,</span><span class="nx">args</span><span class="p">.</span><span class="nx">velocity</span><span class="p">,</span><span class="nx">args</span><span class="p">.</span><span class="nx">otherVelocity</span><span class="p">,</span>
    <span class="nx">args</span><span class="p">.</span><span class="nx">alpha</span><span class="p">,</span><span class="nx">args</span><span class="p">.</span><span class="nx">fill</span><span class="p">,</span><span class="nx">args</span><span class="p">.</span><span class="nx">stroke</span><span class="p">,</span><span class="nx">args</span><span class="p">.</span><span class="nx">lineCap</span><span class="p">,</span><span class="nx">args</span><span class="p">.</span><span class="nx">lineWidth</span><span class="p">,</span><span class="nx">args</span><span class="p">.</span><span class="nx">lineJoin</span><span class="p">,</span><span class="nx">args</span><span class="p">.</span><span class="nx">miterLimit</span><span class="p">)</span>
    <span class="vi">@width = </span><span class="nx">args</span><span class="p">.</span><span class="nx">width</span> <span class="o">or</span> <span class="mi">100</span>
    <span class="vi">@height = </span><span class="nx">args</span><span class="p">.</span><span class="nx">height</span> <span class="o">or</span> <span class="mi">100</span>
    <span class="vi">@arcRadius = </span><span class="nx">args</span><span class="p">.</span><span class="nx">arcRadius</span> <span class="o">or</span> <span class="mi">10</span>

  <span class="nv">draw: </span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>The width of the rectangle goes from edge to edge, but the drawing code needs the width between 
the two arcRadius corner lengths on either side. Width is redefined here to be faster and help 
code redability. The same goes for the height.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">context.fillStyle = </span><span class="nx">@fill</span>
    <span class="nv">context.strokeStyle = </span><span class="nx">@stroke</span>
    <span class="nv">width = </span><span class="nx">@width</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="nx">@arcRadius</span><span class="p">)</span>
    <span class="nv">height = </span><span class="nx">@height</span> <span class="o">-</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="nx">@arcRadius</span><span class="p">)</span>
    <span class="nv">arcRadius = </span><span class="nx">@arcRadius</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="nx">@width</span><span class="err">/2),-(@height/2))</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">beginPath</span><span class="p">()</span>  
    <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">arcRadius</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">width</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">arcTo</span><span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="nx">arcRadius</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">width</span><span class="o">+</span><span class="nx">arcRadius</span><span class="p">,</span><span class="nx">arcRadius</span><span class="p">,</span><span class="nx">arcRadius</span><span class="p">)</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="nx">arcRadius</span><span class="p">,</span><span class="nx">arcRadius</span><span class="o">+</span><span class="nx">height</span><span class="p">)</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">arcTo</span><span class="p">(</span><span class="nx">width</span><span class="o">+</span><span class="nx">arcRadius</span><span class="p">,</span><span class="nx">height</span><span class="o">+</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="nx">arcRadius</span><span class="p">),</span><span class="nx">width</span><span class="p">,</span><span class="nx">height</span><span class="o">+</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="nx">arcRadius</span><span class="p">),</span><span class="nx">arcRadius</span><span class="p">)</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">arcRadius</span><span class="p">,</span><span class="nx">height</span><span class="o">+</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="nx">arcRadius</span><span class="p">))</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">arcTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">height</span><span class="o">+</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="nx">arcRadius</span><span class="p">),</span><span class="mi">0</span><span class="p">,</span><span class="nx">height</span><span class="o">+</span><span class="nx">arcRadius</span><span class="p">,</span><span class="nx">arcRadius</span><span class="p">)</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nx">arcRadius</span><span class="p">)</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">arcTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">arcRadius</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="nx">arcRadius</span><span class="p">)</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">fill</span><span class="p">()</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">stroke</span><span class="p">()</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 